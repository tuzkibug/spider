# spider
客户需求：定时检查所追番剧是否更新 技术实现：python2.7爬虫+beautifulsoup解析+微博/微信API调用完成信息发送

具体实施：1. 编写简单爬虫抓取固定页面并保存；2. 利用beautifulsoup解析抓取的网页，获取特定的标签内容并保存至固定文件temp.txt；3. 每十分钟（时间间隔待定）重复抓取内容并与之前的文件比对，若相同则视为无更新，程序停止；若不一致，则视为更新，并将内容重新保存至temp.txt，同时调用微博API接口发送微博（或调用微信公众号API接口发送微信，倾向于这种，实时性强）

难点分析：1. 抓取的页面是否为静态页面；2. 公众号接口不熟悉且要求不能群发只能定点发；3. 微博接口不熟，且需要申请新号做特别关注

使用场景延伸：1. 增加微博更新提醒（为了gakki的图）；2. 获取商品价格变动（待检验） 部署环境：阿里云主机

项目实现变更：微博API申请阻塞，微信API个人号不支持程序自动群发，更改为发送邮件。

项目变更实施：1. 编写简单爬虫抓取固定页面并保存；2. 利用beautifulsoup解析抓取的网页，获取特定的标签内容并保存至固定文件new.txt；3. 每十分钟（时间间隔待定）重复抓取内容并与之前的文件比对，若相同则视为无更新，程序停止；若不一致，则视为更新，并将内容重新保存至old.txt，同时调用系统邮件服务向外部邮箱发送邮件。

Gaspider.py文件，专注抓取页面信息并与旧信息比对，并完成更新信息和发送邮件的任务。相关文件：new.txt，old.txt，分别存放旧网页信息和新的网页信息。

mail.sh文件，用linux自带邮件功能发送邮件至指定邮箱。编辑/etc/mail.rc，添加相应的邮箱登陆信息。

set from=test@lzu.cn smtp=smtp.lzu.cn
set smtp-auth-user=your_E-mail_address smtp-auth-password=your_password
set smtp-auth=login
 

main.py文件，后台持久运行。用nohup python main.py &保证终端关闭也可以持久运行。用ps -ef | grep main.py检查是否正常。


改进空间：本来想用crontab，但一直不行，找不到原因，才用了备用方案main.py。另，微博和微信的API都有很多限制，实现麻烦，暂不适用。
